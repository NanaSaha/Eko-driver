(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{gCqE:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J"),o=t("mrSG"),i=t("ZZ/e"),a=t("1JF4"),u=t("kyOO"),c=t("kFzK"),r=t("Sf7E"),s=t("WFqv"),p=t("6nr9"),d=t("86hP"),g=t("Aso2"),b=t("fTLw");class h{constructor(n,l,t,e,o,i,a,u,c,r,s,p,d,g,b){this.navCtrl=n,this.One=l,this.lp=t,this.events=e,this.platform=o,this.activatedRoute=i,this.gCode=a,this.locat=u,this.settings=c,this.oneSignal=r,this.pop=s,this.load=p,this.profile=d,this.alert=g,this.eventProvider=b,this.bookable=!1,this.geocoder=new google.maps.Geocoder,this.currentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getUTCMonth()+1,this.currentDay=(new Date).getUTCDate()}ngOnInit(){if(this.platform.is("cordova"))this.locat.map1.getMyLocation({enableHighAccuracy:!0}).then(n=>{this.lat=n.latLng.lat,this.lng=n.latLng.lng,this.userPos=new google.maps.LatLng(this.lat,this.lng);const l={lat:parseFloat(this.lat),lng:parseFloat(this.lng)};this.geocoder.geocode({location:l},(n,l)=>{"OK"===l&&(this.CheckPossibles(),this.locationName=n[0].formatted_address)}),console.log("How Ploder Goder ....")});else{this.lat=4.883364,this.lng=7.025034,this.userPos=new google.maps.LatLng(this.lat,this.lng);const n={lat:parseFloat(this.lat),lng:parseFloat(this.lng)};this.geocoder.geocode({location:n},(n,l)=>{"OK"===l&&(this.locationName=n[0].formatted_address,this.CheckPossibles())}),console.log("How Ploder Goder ....")}}CheckPossibles(){this.eventProvider.getScheduleList().on("value",n=>{this.scheduleList=[],n.forEach(n=>{console.log(n.val().Client_Date);const l=new Date,t=new Date(n.val().Client_Date),e=this.calcDate(l,t);console.log(e[1],this.userPos);const o=this.userPos,i=new google.maps.LatLng(n.val().Client_location[0],n.val().Client_location[1]),a=google.maps.geometry.spherical.computeDistanceBetween(o,i);return console.log(a),a<1e3?(this.bookable=!0,console.log("its close enough")):this.bookable=!1,this.scheduleList.push({id:n.key,name:n.val().Client_username,price:n.val().Client_price,date:e[0],duedate:e[1],canBook:!0,time:n.val().Client_Time,location:n.val().Client_locationName,destination:n.val().Client_destinationName,payWith:n.val().Client_paymentForm,picture:n.val().Client_picture,phone:n.val().Client_phoneNumber,lat:n.val().Client_location[0],lng:n.val().Client_location[1],rating:n.val().Client_Rating,ratingText:n.val().Client_RatingText}),!1})}),this.presentRouteLoader("")}Warn(n){this.pop.showPimp(this.lp.translate()[0].k7)}calcDate(n,l){const t=Math.floor(l.getTime()-n.getTime()),e=Math.floor(t/864e5),o=Math.floor(e/31);return Math.floor(o/12),console.log(e),[l.toDateString(),e]}presentRouteLoader(n){return o.b(this,void 0,void 0,(function*(){const l=yield this.load.create({message:n});l.present();const t=setInterval(()=>{null!=this.scheduleList&&(l.dismiss(),clearInterval(t))},1e3)}))}Start(n){this.platform.is("cordova")?this.One.getIds().then(n=>{this.notif_id=n.userId}):this.notif_id="43cd6829-4651-4039-bbc3-aace7fbe7d72",console.log(this.notif_id,n.id),this.notif_id&&(this.platform.is("cordova")||(this.locat.driver_lat=4.883364,this.locat.driver_lng=7.025034,this.gCode.locationName="Abuja, Nigeria",this.locationName="Abuja, Nigeria",this.lat=4.883364,this.lng=7.025034)),this.settings.id=n.id,console.log(this.settings.id),this.settings.current_ID=!0,console.log(n),this.locat.hasTransactionEnded=!0,this.locat.canTrack_=!0,console.log("Stopped Normal Movement Of Driver"),this.oneSignal.isInDeepSh_t=!0,this.profile.getUserAsClientInfo(this.activatedRoute.snapshot.paramMap.get("notif")).off("child_added"),this.profile.getUserAsClientInfo(this.activatedRoute.snapshot.paramMap.get("notif")).off("child_changed"),this.profile.getUserAsClientInfo(this.activatedRoute.snapshot.paramMap.get("notif")).off("child_removed"),this.eventProvider.getCurrentDriver().remove().then(l=>{this.eventProvider.getActivityProfile(n.id).set({Client_username:n.name,Client_Deleted:!1,Client_location:[n.lat,n.lng],Client_locationName:n.location,Client_paymentForm:n.payWith,Client_picture:n.picture,Client_phoneNumber:n.phone,Client_destinationName:n.destination,Client_CanChargeCard:!1,Client_PickedUp:!1,Client_Dropped:!1,Client_HasRated:!1,Client_ended:!1,Client_price:n.price,Client_Rating:n.rating,Client_RatingText:n.ratingText,entered:0,Driver_name:this.profile.name,Driver_location:[this.lat,this.lng],Driver_locationName:this.locationName,Driver_plate:this.profile.plate,Driver_picture:this.profile.picture,Driver_ID:"43566625",Driver_seats:this.profile.seat,Driver_carType:this.profile.carType,Driver_rating:this.profile.rating,Driver_number:this.profile.number,Driver_HasRated:!1}).then(l=>{this.platform.is("cordova")&&this.oneSignal.sendPush(n.id),this.platform.ready().then(()=>{this.platform.backButton.subscribe(()=>this.pop.presentToast(this.lp.translate()[0].k8))}),this.navCtrl.pop().then(()=>{this.settings.id=n.id,console.log(this.settings.id)})})})}goBack(){this.navCtrl.navigateBack("home")}}class m{}var f=t("pMnS"),C=t("oBZk"),_=t("SVse"),v=t("iInd"),M=e.qb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]   .drive[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]   .drive[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:12px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#3eab0f;font-size:1.67em;padding-top:14px;padding-bottom:14px;border-radius:12px}ion-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:orange;font-size:1.47em;padding-top:14px;padding-bottom:14px;border-bottom:1px solid rgba(212,212,212,.93)}ion-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#2c88f1;font-size:1.17em;padding-top:14px;padding-bottom:14px}ion-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{width:auto;padding-top:8px;padding-bottom:8px}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3em;height:auto}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:orange}ion-content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{width:auto;padding-top:8px;padding-bottom:8px}ion-content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#483d8b}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3em;height:auto;line-height:100px;width:auto}ion-content[_ngcontent-%COMP%]   .duedate[_ngcontent-%COMP%]{color:#fff;width:auto;background:#3eab0f;border:1px solid #c5c5c5;border-radius:12px;padding:12px}ion-content[_ngcontent-%COMP%]   .duedate[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#483d8b}ion-content[_ngcontent-%COMP%]   .onduedate[_ngcontent-%COMP%]{color:#fff;width:auto;background:#f53d3d;border:1px solid #c5c5c5;border-radius:12px;padding:12px}ion-content[_ngcontent-%COMP%]   .onduedate[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#483d8b}#topcontent[_ngcontent-%COMP%]{width:100%;padding-top:14px;padding-bottom:14px;font-size:1.27em;color:#fff}#topcontent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #f7f7f7;vertical-align:middle;width:100%}h1[_ngcontent-%COMP%]{background:#248cd2;font-size:1.67em;padding-top:14px;width:auto;padding-bottom:14px}.followed-items[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px;border-radius:12px;border:1px solid rgba(212,212,212,.93)}"]],data:{}});function O(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,1,"h2",[["class","ion-text-center"]],null,null,null,null,null)),(n()(),e.Mb(-1,null,[" No Rides Around You Or Are Due For Starting. "]))],null,null)}function P(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"h2",[["class","date"]],null,null,null,null,null)),(n()(),e.sb(1,0,null,null,3,"strong",[],null,null,null,null,null)),(n()(),e.sb(2,0,null,null,1,"ion-icon",[["name","calendar"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,null,[""," "]))],(function(n,l){n(l,3,0,"calendar")}),(function(n,l){n(l,4,0,l.component.lp.translate()[0].k2)}))}function k(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"h2",[["class","date"]],null,null,null,null,null)),(n()(),e.sb(1,0,null,null,3,"strong",[],null,null,null,null,null)),(n()(),e.sb(2,0,null,null,1,"ion-icon",[["name","calendar"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,null,[""," "]))],(function(n,l){n(l,3,0,"calendar")}),(function(n,l){n(l,4,0,null==l.parent.parent.context.$implicit?null:l.parent.parent.context.$implicit.date)}))}function x(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"h2",[["class","time"]],null,null,null,null,null)),(n()(),e.sb(1,0,null,null,3,"strong",[],null,null,null,null,null)),(n()(),e.sb(2,0,null,null,1,"ion-icon",[["name","clock"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,null,[""," "]))],(function(n,l){n(l,3,0,"clock")}),(function(n,l){n(l,4,0,null==l.parent.parent.context.$implicit?null:l.parent.parent.context.$implicit.time)}))}function y(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"h2",[["class","price"]],null,null,null,null,null)),(n()(),e.sb(1,0,null,null,3,"strong",[],null,null,null,null,null)),(n()(),e.sb(2,0,null,null,1,"ion-icon",[["name","ios-cash"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,null,["",""," "]))],(function(n,l){n(l,3,0,"ios-cash")}),(function(n,l){n(l,4,0,l.component.settings.appcurrency,null==l.parent.parent.context.$implicit?null:l.parent.parent.context.$implicit.price)}))}function D(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"ion-button",[["color","gery"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.Warn(n.parent.parent.context.$implicit.duedate)&&e),e}),C.P,C.d)),e.rb(1,49152,null,0,i.l,[e.h,e.k,e.y],{color:[0,"color"]},null),(n()(),e.sb(2,0,null,0,1,"ion-icon",[["name","ios-car"],["slot","start"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,0,[" "," "," "," "]))],(function(n,l){n(l,1,0,"gery"),n(l,3,0,"ios-car")}),(function(n,l){var t=l.component;n(l,4,0,t.lp.translate()[0].k3,null==l.parent.parent.context.$implicit?null:l.parent.parent.context.$implicit.duedate,t.lp.translate()[0].k4)}))}function w(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"ion-button",[["color","gery"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.Warn(n.parent.parent.context.$implicit.duedate)&&e),e}),C.P,C.d)),e.rb(1,49152,null,0,i.l,[e.h,e.k,e.y],{color:[0,"color"]},null),(n()(),e.sb(2,0,null,0,1,"ion-icon",[["name","ios-car"],["slot","start"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,0,[" "," "]))],(function(n,l){n(l,1,0,"gery"),n(l,3,0,"ios-car")}),(function(n,l){n(l,4,0,l.component.lp.translate()[0].k5)}))}function I(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,4,"ion-button",[["color","gery"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.Start(n.parent.parent.context.$implicit)&&e),e}),C.P,C.d)),e.rb(1,49152,null,0,i.l,[e.h,e.k,e.y],{color:[0,"color"]},null),(n()(),e.sb(2,0,null,0,1,"ion-icon",[["name","ios-car"],["slot","start"]],null,null,null,C.ab,C.o)),e.rb(3,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(4,0,[" "," "]))],(function(n,l){n(l,1,0,"gery"),n(l,3,0,"ios-car")}),(function(n,l){n(l,4,0,l.component.lp.translate()[0].k6)}))}function N(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,28,"ion-item",[],null,null,null,C.gb,C.s)),e.rb(1,49152,null,0,i.I,[e.h,e.k,e.y],null,null),(n()(),e.hb(16777216,null,0,1,null,P)),e.rb(3,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,k)),e.rb(5,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,x)),e.rb(7,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.sb(8,0,null,0,4,"h2",[["class","drive"]],null,null,null,null,null)),(n()(),e.sb(9,0,null,null,3,"strong",[],null,null,null,null,null)),(n()(),e.sb(10,0,null,null,1,"ion-icon",[["name","contact"]],null,null,null,C.ab,C.o)),e.rb(11,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(12,null,[""," "])),(n()(),e.hb(16777216,null,0,1,null,y)),e.rb(14,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.sb(15,0,null,0,3,"p",[["class",""]],null,null,null,null,null)),(n()(),e.sb(16,0,null,null,1,"ion-icon",[["name","locate"]],null,null,null,C.ab,C.o)),e.rb(17,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(18,null,[""," "])),(n()(),e.sb(19,0,null,0,3,"p",[["class","destination"]],null,null,null,null,null)),(n()(),e.sb(20,0,null,null,1,"ion-icon",[["name","flag"]],null,null,null,C.ab,C.o)),e.rb(21,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.Mb(22,null,[""," "])),(n()(),e.hb(16777216,null,0,1,null,D)),e.rb(24,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,w)),e.rb(26,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,I)),e.rb(28,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,3,0,-1==l.parent.context.$implicit.duedate),n(l,5,0,l.parent.context.$implicit.duedate>=0),n(l,7,0,l.parent.context.$implicit.duedate>=0&&null!=l.parent.context.$implicit.time),n(l,11,0,"contact"),n(l,14,0,0!=l.parent.context.$implicit.price),n(l,17,0,"locate"),n(l,21,0,"flag"),n(l,24,0,l.parent.context.$implicit.duedate>0),n(l,26,0,0==l.parent.context.$implicit.duedate),n(l,28,0,-1==l.parent.context.$implicit.duedate)}),(function(n,l){n(l,12,0,null==l.parent.context.$implicit?null:l.parent.context.$implicit.name),n(l,18,0,null==l.parent.context.$implicit?null:l.parent.context.$implicit.location),n(l,22,0,null==l.parent.context.$implicit?null:l.parent.context.$implicit.destination)}))}function $(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,5,"ion-list",[["class","ion-text-center"]],null,null,null,C.ib,C.w)),e.rb(1,49152,null,0,i.P,[e.h,e.k,e.y],null,null),(n()(),e.hb(16777216,null,0,1,null,O)),e.rb(3,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,N)),e.rb(5,16384,null,0,_.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,3,0,!l.context.$implicit.duedate>=!t.bookable),n(l,5,0,l.context.$implicit.duedate>=t.bookable)}),null)}function z(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,9,"ion-header",[["no-border",""]],null,null,null,C.Z,C.n)),e.rb(1,49152,null,0,i.C,[e.h,e.k,e.y],null,null),(n()(),e.sb(2,0,null,0,7,"ion-toolbar",[["style","margin-top: 20px"]],null,null,null,C.wb,C.K)),e.rb(3,49152,null,0,i.Db,[e.h,e.k,e.y],null,null),(n()(),e.sb(4,0,null,0,5,"ion-button",[["color","primary"],["fill","clear"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goBack()&&e),e}),C.P,C.d)),e.rb(5,49152,null,0,i.l,[e.h,e.k,e.y],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),e.sb(6,0,null,0,1,"ion-icon",[["name","arrow-back"],["style","font-size: 1.5em"]],null,null,null,C.ab,C.o)),e.rb(7,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(n()(),e.sb(8,0,null,0,1,"span",[["style","margin-left:30px; font-size: 1.4em"]],null,null,null,null,null)),(n()(),e.Mb(9,null,["",""])),(n()(),e.sb(10,0,null,null,4,"ion-content",[["class","yes-scroll"]],null,null,null,C.S,C.g)),e.rb(11,49152,null,0,i.v,[e.h,e.k,e.y],null,null),(n()(),e.sb(12,0,null,0,2,"div",[["class","followed-items"]],null,null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,$)),e.rb(14,278528,null,0,_.j,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,5,0,"primary","clear"),n(l,7,0,"arrow-back"),n(l,14,0,t.scheduleList)}),(function(n,l){n(l,9,0,l.component.lp.translate()[0].k1)}))}function L(n){return e.Ob(0,[(n()(),e.sb(0,0,null,null,1,"app-schedule",[],null,null,null,z,M)),e.rb(1,114688,null,0,h,[i.Kb,a.a,u.a,i.f,i.Nb,v.a,s.a,c.a,p.a,r.a,d.a,i.Hb,g.a,i.b,b.a],null,null)],(function(n,l){n(l,1,0)}),null)}var F=e.ob("app-schedule",h,L,{},{},[]),S=t("s7LF");t.d(l,"SchedulePageModuleNgFactory",(function(){return K}));var K=e.pb(m,[],(function(n){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[f.a,F]],[3,e.j],e.w]),e.Cb(4608,_.m,_.l,[e.t,[2,_.y]]),e.Cb(4608,S.w,S.w,[]),e.Cb(4608,i.c,i.c,[e.y,e.g]),e.Cb(4608,i.Jb,i.Jb,[i.c,e.j,e.q]),e.Cb(4608,i.Ob,i.Ob,[i.c,e.j,e.q]),e.Cb(1073742336,_.b,_.b,[]),e.Cb(1073742336,S.v,S.v,[]),e.Cb(1073742336,S.j,S.j,[]),e.Cb(1073742336,i.Fb,i.Fb,[]),e.Cb(1073742336,v.o,v.o,[[2,v.t],[2,v.m]]),e.Cb(1073742336,m,m,[]),e.Cb(1024,v.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);