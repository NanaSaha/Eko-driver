(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"T/HH":function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=t("mrSG"),o=t("ZZ/e"),i=t("Aso2"),r=function(){function n(n,l,t){var u=this;this.navCtrl=n,this.alertCtrl=l,this.ph=t,this.ammount=0,this.funds=0,this.public_key="pk_live_3cbc59938d89297220920c120790e6bd28d07d91",this.channels=["bank","card","ussd","qr","mobile_money"],this.random_id=Math.floor(Date.now()/1e3),this.ph.getUserProfile().on("value",(function(n){console.log("FUNDS--\x3e"+n.val()),u.ph.funds=n.val().funds}))}return n.prototype.ionViewDidLoad=function(){var n=this;this.ph.getUserProfile().on("value",(function(l){console.log("FUNDS--\x3e"+l.val()),n.ph.funds=l.val().funds}))},n.prototype.AddNow=function(){null==this.ph.card?(this.navCtrl.navigateRoot("card"),this.ph.addedFunds=this.funds):this.updateFunds()},n.prototype.goBack=function(){this.navCtrl.navigateBack("home")},n.prototype.updateFunds=function(){return e.b(this,void 0,void 0,(function(){return e.e(this,(function(n){switch(n.label){case 0:return[4,this.alertCtrl.create({message:"Enter Ammount to Add To Your Funds",inputs:[{value:"Enter Here"}],buttons:[{text:"cancel"},{text:"Accept",handler:function(n){console.log(n)}}]})];case 1:return n.sent().present(),[2]}}))}))},n.prototype.subscribe=function(){return e.b(this,void 0,void 0,(function(){var n=this;return e.e(this,(function(l){switch(l.label){case 0:return[4,this.alertCtrl.create({message:"Enter Amount to Fund Your Wallet",inputs:[{value:""}],buttons:[{text:"Cancel"},{text:"Accept",handler:function(l){n.funds=l[0],console.log("FUNDS--\x3e>"+100*n.funds)}}]})];case 1:return l.sent().present(),[2]}}))}))},n.prototype.updateFundsO=function(){return e.b(this,void 0,void 0,(function(){var n=this;return e.e(this,(function(l){switch(l.label){case 0:return[4,this.alertCtrl.create({message:"Enter Amount to Fund Your Wallet",inputs:[{value:""}],buttons:[{text:"Cancel"},{text:"Accept",handler:function(l){n.funds=parseInt(l[0])+parseInt(n.ph.funds),console.log("FUNDS--\x3e>"+100*n.funds)}}]})];case 1:return l.sent().present(),[2]}}))}))},n.prototype.ngOnInit=function(){var n=this;console.log("INIT TRIGGERED",this.ph.id),this.ph.getUserProfile().on("value",(function(l){console.log("FUNDS--\x3e"+l.val()),console.log("FUNDS--\x3e"+JSON.stringify(l)),n.ph.funds=l.val().funds}))},n.prototype.paymentInit=function(){return e.b(this,void 0,void 0,(function(){return e.e(this,(function(n){return console.log("Payment initialized"),[2]}))}))},n.prototype.paymentDone=function(n){return e.b(this,void 0,void 0,(function(){var l,t,u,o;return e.e(this,(function(e){return console.log("RESPNSE AFTER PAYMENT"+JSON.stringify(n)),console.log("funding to update payment"+this.funds),this.ph.UpdatePaymentType(2,this.funds),l=n.reference,t=n.trans,u=n.status,o=this.ph.id,console.log("TRans Ref"+l),this.ph.newSubscription(this.funds,l,t,u,o),[2]}))}))},n.prototype.paymentCancel=function(){return e.b(this,void 0,void 0,(function(){return e.e(this,(function(n){return console.log("payment failed"),[2]}))}))},n}(),a=function(){return function(){}}(),c=t("pMnS"),s=t("oBZk"),b=t("xOo0"),d=t("Ip0R"),p=u.sb({encapsulation:2,styles:[],data:{}});function f(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,5,"button",[],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.pay()&&u),u}),null,null)),u.Lb(512,null,d.t,d.u,[u.t,u.u,u.k,u.E]),u.tb(2,278528,null,0,d.i,[d.t],{ngClass:[0,"ngClass"]},null),u.Lb(512,null,d.v,d.w,[u.k,u.u,u.E]),u.tb(4,278528,null,0,d.n,[d.v],{ngStyle:[0,"ngStyle"]},null),u.Fb(null,0)],(function(n,l){var t=l.component;n(l,2,0,t.class),n(l,4,0,t.style)}),null)}var h=u.sb({encapsulation:0,styles:[['.btn-primary[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border:0;border-radius:6px;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button;background-color:#000!important;--background-color:#000000!important;color:#fbb91d!important;height:40px}.centerDiv2[_ngcontent-%COMP%]{position:relative;text-align:center;margin-top:5%}ion-footer[_ngcontent-%COMP%]{background:0 0!important}.footer-md[_ngcontent-%COMP%]:before{left:0;top:-2px;bottom:auto;background-position:left 0 top 0;position:absolute;width:100%;height:2px;background-repeat:repeat-x;content:""!important}']],data:{}});function m(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,6,"ion-item",[["style","text-align: center; margin-top: 20%"]],null,null,null,s.gb,s.s)),u.tb(1,49152,null,0,o.I,[u.h,u.k,u.A],null,null),(n()(),u.ub(2,0,null,0,4,"h4",[],null,null,null,null,null)),(n()(),u.Ob(-1,null,[" You have successfully funded "])),(n()(),u.ub(4,0,null,null,1,"span",[["style","color: #fbb91d"]],null,null,null,null,null)),(n()(),u.Ob(5,null,["GHC "," "])),(n()(),u.Ob(-1,null,["in your wallet. You have 30 days to use it on Ekodot. Enjoy driving! "]))],null,(function(n,l){n(l,5,0,l.component.ph.funds)}))}function g(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,5,"div",[["class","centerDiv2"]],null,null,null,null,null)),(n()(),u.ub(1,0,null,null,4,"ion-button",[["slot","end"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.updateFundsO()&&u),u}),s.P,s.d)),u.tb(2,49152,null,0,o.l,[u.h,u.k,u.A],null,null),(n()(),u.ub(3,0,null,0,1,"ion-icon",[["class","ion-text-center"],["name","ios-add"]],null,null,null,s.ab,s.o)),u.tb(4,49152,null,0,o.D,[u.h,u.k,u.A],{name:[0,"name"]},null),(n()(),u.Ob(-1,0,[" Renew 30- day Subscription "]))],(function(n,l){n(l,4,0,"ios-add")}),null)}function v(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,13,"div",[["style","text-align: center; margin-top: 20%"]],null,null,null,null,null)),(n()(),u.ub(1,0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),u.Ob(-1,null,["Subscribe to drive with Ekodot!"])),(n()(),u.ub(3,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),u.Ob(-1,null,[" Fund your wallet of "])),(n()(),u.ub(5,0,null,null,1,"span",[["style","color: #fbb91d"]],null,null,null,null,null)),(n()(),u.Ob(-1,null,["GHC 100 "])),(n()(),u.Ob(-1,null,["and have 30 days to use it on Ekodot. Enjoy driving! "])),(n()(),u.ub(8,0,null,null,5,"div",[["class","centerDiv2"]],null,null,null,null,null)),(n()(),u.ub(9,0,null,null,4,"ion-button",[["slot","end"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.subscribe()&&u),u}),s.P,s.d)),u.tb(10,49152,null,0,o.l,[u.h,u.k,u.A],null,null),(n()(),u.ub(11,0,null,0,1,"ion-icon",[["class","ion-text-center"],["name","ios-add"]],null,null,null,s.ab,s.o)),u.tb(12,49152,null,0,o.D,[u.h,u.k,u.A],{name:[0,"name"]},null),(n()(),u.Ob(-1,0,[" Fund Wallet "]))],(function(n,l){n(l,12,0,"ios-add")}),null)}function y(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,3,"div",[["class","centerDiv2"]],null,null,null,null,null)),(n()(),u.ub(1,0,null,null,2,"angular4-paystack",[],null,[[null,"close"],[null,"callback"]],(function(n,l,t){var u=!0,e=n.component;return"close"===l&&(u=!1!==e.paymentCancel()&&u),"callback"===l&&(u=!1!==e.paymentDone(t)&&u),u}),f,p)),u.tb(2,49152,null,0,b.a,[b.d],{key:[0,"key"],email:[1,"email"],amount:[2,"amount"],ref:[3,"ref"],currency:[4,"currency"],channels:[5,"channels"]},{callback:"callback"}),(n()(),u.Ob(3,0,["Pay GHC "," with Mobile Money/Card"]))],(function(n,l){var t=l.component;n(l,2,0,"pk_live_3cbc59938d89297220920c120790e6bd28d07d91","nana@ekodot.com",t.funds,t.random_id,"GHS",t.channels)}),(function(n,l){n(l,3,0,l.component.funds)}))}function k(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,9,"ion-header",[["no-border",""]],null,null,null,s.Z,s.n)),u.tb(1,49152,null,0,o.C,[u.h,u.k,u.A],null,null),(n()(),u.ub(2,0,null,0,7,"ion-toolbar",[["style","margin-top: 20px"]],null,null,null,s.wb,s.K)),u.tb(3,49152,null,0,o.Db,[u.h,u.k,u.A],null,null),(n()(),u.ub(4,0,null,0,5,"ion-button",[["color","primary"],["fill","clear"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.goBack()&&u),u}),s.P,s.d)),u.tb(5,49152,null,0,o.l,[u.h,u.k,u.A],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),u.ub(6,0,null,0,1,"ion-icon",[["name","arrow-back"],["style","font-size: 1.5em"]],null,null,null,s.ab,s.o)),u.tb(7,49152,null,0,o.D,[u.h,u.k,u.A],{name:[0,"name"]},null),(n()(),u.ub(8,0,null,0,1,"span",[["style","margin-left: 30px; font-size: 1.4em"]],null,null,null,null,null)),(n()(),u.Ob(-1,null,["Subscription Wallet"])),(n()(),u.ub(10,0,null,null,9,"ion-content",[],null,null,null,s.S,s.g)),u.tb(11,49152,null,0,o.v,[u.h,u.k,u.A],null,null),(n()(),u.jb(16777216,null,0,1,null,m)),u.tb(13,16384,null,0,d.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(n()(),u.jb(16777216,null,0,1,null,g)),u.tb(15,16384,null,0,d.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(n()(),u.jb(16777216,null,0,1,null,v)),u.tb(17,16384,null,0,d.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(n()(),u.jb(16777216,null,0,1,null,y)),u.tb(19,16384,null,0,d.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(n()(),u.ub(20,0,null,null,2,"ion-footer",[],null,null,null,s.X,s.l)),u.tb(21,49152,null,0,o.A,[u.h,u.k,u.A],null,null),(n()(),u.ub(22,0,null,0,0,"img",[["src","/assets/img/payment.png"]],null,null,null,null,null))],(function(n,l){var t=l.component;n(l,5,0,"primary","clear"),n(l,7,0,"arrow-back"),n(l,13,0,t.ph.funds),n(l,15,0,t.ph.funds),n(l,17,0,!t.ph.funds),n(l,19,0,t.funds)}),null)}function E(n){return u.Qb(0,[(n()(),u.ub(0,0,null,null,1,"app-wallet",[],null,null,null,k,h)),u.tb(1,114688,null,0,r,[o.Kb,o.b,i.a],null,null)],(function(n,l){n(l,1,0)}),null)}var w=u.qb("app-wallet",r,E,{},{},[]),x=t("gIcY"),C=t("ZYCi");t.d(l,"WalletPageModuleNgFactory",(function(){return A}));var A=u.rb(a,[],(function(n){return u.Db([u.Eb(512,u.j,u.cb,[[8,[c.a,w]],[3,u.j],u.y]),u.Eb(4608,d.m,d.l,[u.v,[2,d.y]]),u.Eb(4608,x.w,x.w,[]),u.Eb(4608,o.c,o.c,[u.A,u.g]),u.Eb(4608,o.Jb,o.Jb,[o.c,u.j,u.r]),u.Eb(4608,o.Ob,o.Ob,[o.c,u.j,u.r]),u.Eb(1073742336,d.b,d.b,[]),u.Eb(1073742336,x.v,x.v,[]),u.Eb(1073742336,x.j,x.j,[]),u.Eb(1073742336,o.Fb,o.Fb,[]),u.Eb(1073742336,b.c,b.c,[]),u.Eb(1073742336,C.o,C.o,[[2,C.t],[2,C.m]]),u.Eb(1073742336,a,a,[]),u.Eb(1024,C.k,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);