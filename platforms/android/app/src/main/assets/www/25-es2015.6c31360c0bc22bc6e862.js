(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{Ez5i:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),u=t("mrSG"),o=t("ZZ/e"),r=t("6nr9"),i=t("fTLw"),s=t("Aso2");class a{constructor(l,n,t,e,u){this.navCtrl=l,this.prof=n,this.settings=t,this.eventProvider=e,this.route=u,this.currentEvent={},this.total=0,this.allTotals=0,this.driverMade=0,this.surcharges=[],this.totalSurge=0,this.actual=0,this.riderPaid=0,this.totalRiderSurge=0,this.totalDriverSurge=0,this.percentRider=0,this.flatRider=0,this.percentDriver=0,this.flatDriver=0,this.riderPercents=[],this.driverPercents=[],this.math=Math,this.riderpaid=0}ionViewDidEnter(){let l=[],n=[],t=[],e=[],u=[],o=[],r=[],i=[];console.log(this.route.snapshot.paramMap.get("eventId")),this.eventProvider.getEventDetail(this.route.snapshot.paramMap.get("eventId")).on("value",s=>{if(this.currentEvent=s.val(),this.currentEvent.id=s.key,console.log("EVENTS:",s.val()),this.dateOfTip=this.currentEvent.date,this.tolls=this.currentEvent.toll,this.currentPrie=this.currentEvent.realPrice,this.surcharges=this.currentEvent.surcharge,this.osc=this.currentEvent.osc,this.riderpaid=this.currentEvent.realPrice,this.driverMade=this.currentEvent.realPrice,this.currentEvent.surcharge)for(let l=0;l<this.currentEvent.surcharge.length;l++){t.push(parseFloat(this.currentEvent.surcharge[l].price));const n=t.reduce((l,n)=>l+n);this.totalSurge=n,this.actual=this.currentEvent.price-this.totalSurge,console.log(this.totalSurge)}if(this.surcharges&&this.surcharges.forEach(n=>{if(1==n.owner){if(1==n.bone){let l=n.price/100*this.currentEvent.realPrice;console.log(n.price),e.push(l);const t=e.reduce((l,n)=>l+n);this.percentRider=t,console.log(this.percentRider)}if(0==n.bone){l.push(parseFloat(n.price));const t=l.reduce((l,n)=>l+n);this.flatRider=t,console.log(t)}this.totalRiderSurge=this.flatRider+this.percentRider,console.log(this.totalRiderSurge)}if(this.riderpaid=this.currentEvent.realPrice,0==n.owner){if(1==n.bone){let l=n.price/100;console.log(l*this.currentEvent.tip),r.push(l*this.currentEvent.tip);const t=r.reduce((l,n)=>l+n);this.percentDrive=t,console.log(Math.floor(n.price)/100*this.currentEvent.tip)}if(0==n.bone){i.push(parseFloat(n.price));const l=i.reduce((l,n)=>l+n);this.flatDrive=l,console.log(l)}this.totalDriverSurg=this.flatDrive+this.percentDrive}if(0==n.owner){if(1==n.bone){let l=n.price/100;console.log(l*this.riderpaid),o.push(l*this.riderpaid);const t=o.reduce((l,n)=>l+n);this.percentDriver=t,console.log(Math.floor(n.price)/100*this.riderpaid)}if(0==n.bone){u.push(parseFloat(n.price));const l=u.reduce((l,n)=>l+n);this.flatDriver=l,console.log(l)}this.totalDriverSurge=this.flatDriver+this.percentDriver,console.log(this.totalDriverSurge,this.flatDriver,this.percentDriver)}}),console.log(this.totalDriverSurg),this.totemTIPS=(parseFloat(this.currentEvent.tip)-this.totalDriverSurg).toFixed(2)||0,this.totemTIPS||(this.totemTIPS=0),console.log(this.currentEvent.tolls),this.currentEvent.toll)for(let t=0;t<this.currentEvent.toll.length;t++){n.push(this.currentEvent.toll[t].tagCost);const e=n.reduce((l,n)=>l+n);this.total=e,console.log(this.total,l)}this.currentEvent.tip||(this.currentEvent.tip=0),this.myTip=parseFloat(this.currentEvent.tip).toFixed(2),this.driverMade=this.riderpaid,this.GetRoute(this.currentEvent.location,this.currentEvent.destination)})}goBack(){return u.b(this,void 0,void 0,(function*(){this.navCtrl.navigateRoot("history")}))}GetRoute(l,n){var t,e=new google.maps.DirectionsService;let u=new google.maps.DirectionsRenderer({draggable:!0});var o={zoom:7,center:new google.maps.LatLng(18.975,72.8258),disableDefaultUI:!0};let r=new google.maps.Map(document.getElementById("dvMap"),o);u.setMap(r);var i={origin:t=l,destination:n=n,travelMode:google.maps.TravelMode.DRIVING};e.route(i,(l,n)=>{n==google.maps.DirectionsStatus.OK&&u.setDirections(l)}),(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[t],destinations:[n],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(l,n)=>{n==google.maps.DistanceMatrixStatus.OK&&"ZERO_RESULTS"!=l.rows[0].elements[0].status||alert("Unable to find the distance via road.")})}ngOnInit(){}}class c{}var b=t("pMnS"),h=t("oBZk"),d=t("iInd"),g=e.qb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]   .drive[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]   .drive[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8em;padding:12px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#3eab0f;padding-top:14px;padding-bottom:14px;border-radius:12px}ion-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#fbb91d;padding-top:14px;padding-bottom:14px;border-bottom:1px solid rgba(212,212,212,.93)}ion-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#248cd2}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{width:auto;padding-top:8px;padding-bottom:8px}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:auto}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#fbb91d}ion-content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{width:auto;padding-top:8px;padding-bottom:8px}ion-content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8em;padding:5px;color:#483d8b}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3em;height:auto;line-height:100px;width:auto}#topcontent[_ngcontent-%COMP%]{width:100%;padding-top:7px;padding-bottom:7px;font-size:1.27em;color:#fff}#topcontent[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{border:1px solid #f7f7f7;vertical-align:middle;width:100%}h1[_ngcontent-%COMP%]{background:#248cd2;font-size:1.67em;padding-top:7px;width:auto;padding-bottom:7px}.followed-items[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px;border-radius:12px;border:1px solid rgba(212,212,212,.93)}.topped-items[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-top:0;margin-bottom:6px}.topped-items[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fbb91d;font-size:1.27em;padding:2px}.topped-items[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#09f!important;font-size:1em;padding:2px}ion-button[_ngcontent-%COMP%]{border-radius:12px}ion-footer[_ngcontent-%COMP%]{border-top:1.4px solid rgba(212,212,212,.93)}"]],data:{}});function p(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"ion-header",[["no-border",""]],null,null,null,h.Z,h.n)),e.rb(1,49152,null,0,o.C,[e.h,e.k,e.y],null,null),(l()(),e.sb(2,0,null,0,5,"ion-toolbar",[],null,null,null,h.wb,h.K)),e.rb(3,49152,null,0,o.Db,[e.h,e.k,e.y],null,null),(l()(),e.sb(4,0,null,0,3,"ion-button",[["color","primary"],["fill","clear"],["ion-button",""]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.goBack()&&e),e}),h.P,h.d)),e.rb(5,49152,null,0,o.l,[e.h,e.k,e.y],{color:[0,"color"],fill:[1,"fill"]},null),(l()(),e.sb(6,0,null,0,1,"ion-icon",[["name","arrow-back"],["style","font-size: 1.5em"]],null,null,null,h.ab,h.o)),e.rb(7,49152,null,0,o.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(8,0,null,null,119,"ion-content",[["class","yes-scroll"],["color","light"]],null,null,null,h.S,h.g)),e.rb(9,49152,null,0,o.v,[e.h,e.k,e.y],{color:[0,"color"]},null),(l()(),e.sb(10,0,null,0,0,"div",[["id","dvMap"],["style","width: auto; height: 180px"]],null,null,null,null,null)),(l()(),e.sb(11,0,null,0,58,"ion-item",[["class","hists"],["lines","none"]],null,null,null,h.gb,h.s)),e.rb(12,49152,null,0,o.I,[e.h,e.k,e.y],{lines:[0,"lines"]},null),(l()(),e.sb(13,0,null,0,56,"div",[],null,null,null,null,null)),(l()(),e.sb(14,0,null,null,55,"ion-grid",[],null,null,null,h.Y,h.m)),e.rb(15,49152,null,0,o.B,[e.h,e.k,e.y],null,null),(l()(),e.sb(16,0,null,0,9,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(17,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(18,0,null,0,7,"ion-col",[],null,null,null,h.R,h.f)),e.rb(19,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(20,0,null,0,5,"ion-label",[["class","date"]],null,null,null,h.hb,h.v)),e.rb(21,49152,null,0,o.O,[e.h,e.k,e.y],null,null),(l()(),e.sb(22,0,null,0,1,"ion-icon",[["name","calendar-outline"]],null,null,null,h.ab,h.o)),e.rb(23,49152,null,0,o.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(24,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(25,null,["",""])),(l()(),e.sb(26,0,null,0,9,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(27,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(28,0,null,0,7,"ion-col",[],null,null,null,h.R,h.f)),e.rb(29,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(30,0,null,0,5,"ion-label",[["class","location"]],null,null,null,h.hb,h.v)),e.rb(31,49152,null,0,o.O,[e.h,e.k,e.y],null,null),(l()(),e.sb(32,0,null,0,1,"ion-icon",[["name","locate"]],null,null,null,h.ab,h.o)),e.rb(33,49152,null,0,o.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(34,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(35,null,["",""])),(l()(),e.sb(36,0,null,0,9,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(37,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(38,0,null,0,7,"ion-col",[],null,null,null,h.R,h.f)),e.rb(39,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(40,0,null,0,5,"ion-label",[["class","destination"]],null,null,null,h.hb,h.v)),e.rb(41,49152,null,0,o.O,[e.h,e.k,e.y],null,null),(l()(),e.sb(42,0,null,0,1,"ion-icon",[["name","flag"]],null,null,null,h.ab,h.o)),e.rb(43,49152,null,0,o.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(44,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(45,null,["",""])),(l()(),e.sb(46,0,null,0,9,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(47,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(48,0,null,0,7,"ion-col",[],null,null,null,h.R,h.f)),e.rb(49,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(50,0,null,0,5,"ion-label",[["class","price"]],null,null,null,h.hb,h.v)),e.rb(51,49152,null,0,o.O,[e.h,e.k,e.y],null,null),(l()(),e.sb(52,0,null,0,1,"ion-icon",[["name","contact"]],null,null,null,h.ab,h.o)),e.rb(53,49152,null,0,o.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(54,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(55,null,["",""])),(l()(),e.sb(56,0,null,0,9,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(57,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(58,0,null,0,7,"ion-col",[],null,null,null,h.R,h.f)),e.rb(59,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(60,0,null,0,5,"ion-label",[["class","date"]],null,null,null,h.hb,h.v)),e.rb(61,49152,null,0,o.O,[e.h,e.k,e.y],null,null),(l()(),e.sb(62,0,null,0,1,"ion-icon",[["name","car"]],null,null,null,h.ab,h.o)),e.rb(63,49152,null,0,o.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(64,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(65,null,[""," "])),(l()(),e.sb(66,0,null,0,3,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(67,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(68,0,null,0,1,"ion-col",[],null,null,null,h.R,h.f)),e.rb(69,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(70,0,null,0,3,"ion-title",[["padding",""],["text-center",""]],null,null,null,h.vb,h.J)),e.rb(71,49152,null,0,o.Bb,[e.h,e.k,e.y],null,null),e.rb(72,16384,null,0,o.e,[e.k],null,null),(l()(),e.Mb(-1,0,["RIDER PAID"])),(l()(),e.sb(74,0,null,0,4,"ion-title",[["padding",""],["text-center",""]],null,null,null,h.vb,h.J)),e.rb(75,49152,null,0,o.Bb,[e.h,e.k,e.y],null,null),e.rb(76,16384,null,0,o.e,[e.k],null,null),(l()(),e.sb(77,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(78,null,["","",""])),(l()(),e.sb(79,0,null,0,19,"ion-item",[["lines","none"],["padding",""]],null,null,null,h.gb,h.s)),e.rb(80,49152,null,0,o.I,[e.h,e.k,e.y],{lines:[0,"lines"]},null),e.rb(81,16384,null,0,o.e,[e.k],null,null),(l()(),e.sb(82,0,null,0,16,"ion-grid",[],null,null,null,h.Y,h.m)),e.rb(83,49152,null,0,o.B,[e.h,e.k,e.y],null,null),(l()(),e.sb(84,0,null,0,14,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(85,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(86,0,null,0,5,"ion-col",[],null,null,null,h.R,h.f)),e.rb(87,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(88,0,null,0,3,"ion-label",[["style","\n              font-weight: 600;\n              color: rgb(75, 75, 75);\n              margin: 5px;\n              text-align: center;\n            "],["text-center",""]],null,null,null,h.hb,h.v)),e.rb(89,49152,null,0,o.O,[e.h,e.k,e.y],null,null),e.rb(90,16384,null,0,o.e,[e.k],null,null),(l()(),e.Mb(-1,0,[" Ride Cost"])),(l()(),e.sb(92,0,null,0,6,"ion-col",[],null,null,null,h.R,h.f)),e.rb(93,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(94,0,null,0,4,"ion-label",[["style","margin: 5px"],["text-center",""]],null,null,null,h.hb,h.v)),e.rb(95,49152,null,0,o.O,[e.h,e.k,e.y],null,null),e.rb(96,16384,null,0,o.e,[e.k],null,null),(l()(),e.sb(97,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(98,null,["","",""])),(l()(),e.sb(99,0,null,0,3,"ion-title",[["padding",""],["text-center",""]],null,null,null,h.vb,h.J)),e.rb(100,49152,null,0,o.Bb,[e.h,e.k,e.y],null,null),e.rb(101,16384,null,0,o.e,[e.k],null,null),(l()(),e.Mb(-1,0,["DRIVER MADE"])),(l()(),e.sb(103,0,null,0,4,"ion-title",[["text-center",""]],null,null,null,h.vb,h.J)),e.rb(104,49152,null,0,o.Bb,[e.h,e.k,e.y],null,null),e.rb(105,16384,null,0,o.e,[e.k],null,null),(l()(),e.sb(106,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(107,null,["","",""])),(l()(),e.sb(108,0,null,0,19,"ion-item",[["padding",""]],null,null,null,h.gb,h.s)),e.rb(109,49152,null,0,o.I,[e.h,e.k,e.y],null,null),e.rb(110,16384,null,0,o.e,[e.k],null,null),(l()(),e.sb(111,0,null,0,16,"ion-grid",[],null,null,null,h.Y,h.m)),e.rb(112,49152,null,0,o.B,[e.h,e.k,e.y],null,null),(l()(),e.sb(113,0,null,0,14,"ion-row",[],null,null,null,h.lb,h.z)),e.rb(114,49152,null,0,o.kb,[e.h,e.k,e.y],null,null),(l()(),e.sb(115,0,null,0,5,"ion-col",[],null,null,null,h.R,h.f)),e.rb(116,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(117,0,null,0,3,"ion-label",[["style","\n              font-weight: 600;\n              color: rgb(75, 75, 75);\n              margin: 5px;\n              text-align: center;\n            "],["text-center",""]],null,null,null,h.hb,h.v)),e.rb(118,49152,null,0,o.O,[e.h,e.k,e.y],null,null),e.rb(119,16384,null,0,o.e,[e.k],null,null),(l()(),e.Mb(-1,0,["Ride Cost "])),(l()(),e.sb(121,0,null,0,6,"ion-col",[],null,null,null,h.R,h.f)),e.rb(122,49152,null,0,o.u,[e.h,e.k,e.y],null,null),(l()(),e.sb(123,0,null,0,4,"ion-label",[["style","margin: 5px"],["text-center",""]],null,null,null,h.hb,h.v)),e.rb(124,49152,null,0,o.O,[e.h,e.k,e.y],null,null),e.rb(125,16384,null,0,o.e,[e.k],null,null),(l()(),e.sb(126,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(127,null,["","",""]))],(function(l,n){l(n,5,0,"primary","clear"),l(n,7,0,"arrow-back"),l(n,9,0,"light"),l(n,12,0,"none"),l(n,23,0,"calendar-outline"),l(n,33,0,"locate"),l(n,43,0,"flag"),l(n,53,0,"contact"),l(n,63,0,"car"),l(n,80,0,"none")}),(function(l,n){var t=n.component;l(n,25,0,null==t.currentEvent?null:t.currentEvent.date),l(n,35,0,null==t.currentEvent?null:t.currentEvent.location),l(n,45,0,null==t.currentEvent?null:t.currentEvent.destination),l(n,55,0,t.prof.name),l(n,65,0,null==t.currentEvent?null:t.currentEvent.name),l(n,78,0,t.settings.appcurrency,t.riderpaid),l(n,98,0,t.settings.appcurrency,t.currentPrie),l(n,107,0,t.settings.appcurrency,t.driverMade),l(n,127,0,t.settings.appcurrency,t.riderpaid)}))}function v(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"app-historydetail",[],null,null,null,p,g)),e.rb(1,114688,null,0,a,[o.Kb,s.a,r.a,i.a,d.a],null,null)],(function(l,n){l(n,1,0)}),null)}var m=e.ob("app-historydetail",a,v,{},{},[]),f=t("SVse"),M=t("s7LF");t.d(n,"HistorydetailPageModuleNgFactory",(function(){return k}));var k=e.pb(c,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[b.a,m]],[3,e.j],e.w]),e.Cb(4608,f.m,f.l,[e.t,[2,f.y]]),e.Cb(4608,M.w,M.w,[]),e.Cb(4608,o.c,o.c,[e.y,e.g]),e.Cb(4608,o.Jb,o.Jb,[o.c,e.j,e.q]),e.Cb(4608,o.Ob,o.Ob,[o.c,e.j,e.q]),e.Cb(1073742336,f.b,f.b,[]),e.Cb(1073742336,M.v,M.v,[]),e.Cb(1073742336,M.j,M.j,[]),e.Cb(1073742336,o.Fb,o.Fb,[]),e.Cb(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),e.Cb(1073742336,c,c,[]),e.Cb(1024,d.k,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);