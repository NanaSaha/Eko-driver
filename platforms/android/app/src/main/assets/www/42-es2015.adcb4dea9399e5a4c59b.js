(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"T/HH":function(l,n,u){"use strict";u.r(n);var t=u("8Y7J"),e=u("mrSG"),o=u("ZZ/e"),i=u("Aso2");class s{constructor(l,n,u){this.navCtrl=l,this.alertCtrl=n,this.ph=u,this.ammount=0,this.funds=0,this.public_key="pk_live_3cbc59938d89297220920c120790e6bd28d07d91",this.channels=["bank","card","ussd","qr","mobile_money"],this.random_id=Math.floor(Date.now()/1e3),this.ph.getUserProfile().on("value",l=>{console.log("FUNDS--\x3e"+l.val()),this.ph.funds=l.val().funds})}ionViewDidLoad(){this.ph.getUserProfile().on("value",l=>{console.log("FUNDS--\x3e"+l.val()),this.ph.funds=l.val().funds})}AddNow(){null==this.ph.card?(this.navCtrl.navigateRoot("card"),this.ph.addedFunds=this.funds):this.updateFunds()}goBack(){this.navCtrl.navigateBack("home")}updateFunds(){return e.b(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({message:"Enter Ammount to Add To Your Funds",inputs:[{value:"Enter Here"}],buttons:[{text:"cancel"},{text:"Accept",handler:l=>{console.log(l)}}]})).present()}))}subscribe(){return e.b(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({message:"Enter Amount to Fund Your Wallet",inputs:[{value:""}],buttons:[{text:"Cancel"},{text:"Accept",handler:l=>{this.funds=l[0],console.log("FUNDS--\x3e>"+100*this.funds)}}]})).present()}))}updateFundsO(){return e.b(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({message:"Enter Amount to Fund Your Wallet",inputs:[{value:""}],buttons:[{text:"Cancel"},{text:"Accept",handler:l=>{this.funds=parseInt(l[0])+parseInt(this.ph.funds),console.log("FUNDS--\x3e>"+100*this.funds)}}]})).present()}))}ngOnInit(){console.log("INIT TRIGGERED",this.ph.id),this.ph.getUserProfile().on("value",l=>{console.log("FUNDS--\x3e"+l.val()),console.log("FUNDS--\x3e"+JSON.stringify(l)),this.ph.funds=l.val().funds})}paymentInit(){return e.b(this,void 0,void 0,(function*(){console.log("Payment initialized")}))}paymentDone(l){return e.b(this,void 0,void 0,(function*(){console.log("RESPNSE AFTER PAYMENT"+JSON.stringify(l)),console.log("funding to update payment"+this.funds),this.ph.UpdatePaymentType(2,this.funds);let n=l.reference,u=l.trans,t=l.status,e=this.ph.id;console.log("TRans Ref"+n),this.ph.newSubscription(this.funds,n,u,t,e)}))}paymentCancel(){return e.b(this,void 0,void 0,(function*(){console.log("payment failed")}))}}class a{}var r=u("pMnS"),c=u("oBZk"),b=u("1lDo"),d=u("SVse"),p=t.qb({encapsulation:2,styles:[],data:{}});function h(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,5,"button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.pay()&&t),t}),null,null)),t.Jb(512,null,d.t,d.u,[t.r,t.s,t.k,t.C]),t.rb(2,278528,null,0,d.i,[d.t],{ngClass:[0,"ngClass"]},null),t.Jb(512,null,d.v,d.w,[t.k,t.s,t.C]),t.rb(4,278528,null,0,d.n,[d.v],{ngStyle:[0,"ngStyle"]},null),t.Db(null,0)],(function(l,n){var u=n.component;l(n,2,0,u.class),l(n,4,0,u.style)}),null)}var f=t.qb({encapsulation:0,styles:[['.btn-primary[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{border:0;border-radius:6px;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button;background-color:#000!important;--background-color:#000000!important;color:#fbb91d!important;height:40px}.centerDiv2[_ngcontent-%COMP%]{position:relative;text-align:center;margin-top:5%}ion-footer[_ngcontent-%COMP%]{background:0 0!important}.footer-md[_ngcontent-%COMP%]:before{left:0;top:-2px;bottom:auto;background-position:left 0 top 0;position:absolute;width:100%;height:2px;background-repeat:repeat-x;content:""!important}']],data:{}});function m(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,6,"ion-item",[["style","text-align: center; margin-top: 20%"]],null,null,null,c.gb,c.s)),t.rb(1,49152,null,0,o.I,[t.h,t.k,t.y],null,null),(l()(),t.sb(2,0,null,0,4,"h4",[],null,null,null,null,null)),(l()(),t.Mb(-1,null,[" You have successfully funded "])),(l()(),t.sb(4,0,null,null,1,"span",[["style","color: #fbb91d"]],null,null,null,null,null)),(l()(),t.Mb(5,null,["GHC "," "])),(l()(),t.Mb(-1,null,["in your wallet. You have 30 days to use it on Ekodot. Enjoy driving! "]))],null,(function(l,n){l(n,5,0,n.component.ph.funds)}))}function g(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,5,"div",[["class","centerDiv2"]],null,null,null,null,null)),(l()(),t.sb(1,0,null,null,4,"ion-button",[["slot","end"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.updateFundsO()&&t),t}),c.P,c.d)),t.rb(2,49152,null,0,o.l,[t.h,t.k,t.y],null,null),(l()(),t.sb(3,0,null,0,1,"ion-icon",[["class","ion-text-center"],["name","ios-add"]],null,null,null,c.ab,c.o)),t.rb(4,49152,null,0,o.D,[t.h,t.k,t.y],{name:[0,"name"]},null),(l()(),t.Mb(-1,0,[" Renew 30- day Subscription "]))],(function(l,n){l(n,4,0,"ios-add")}),null)}function v(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,13,"div",[["style","text-align: center; margin-top: 20%"]],null,null,null,null,null)),(l()(),t.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Subscribe to drive with Ekodot!"])),(l()(),t.sb(3,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),t.Mb(-1,null,[" Fund your wallet of "])),(l()(),t.sb(5,0,null,null,1,"span",[["style","color: #fbb91d"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["GHC 100 "])),(l()(),t.Mb(-1,null,["and have 30 days to use it on Ekodot. Enjoy driving! "])),(l()(),t.sb(8,0,null,null,5,"div",[["class","centerDiv2"]],null,null,null,null,null)),(l()(),t.sb(9,0,null,null,4,"ion-button",[["slot","end"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.subscribe()&&t),t}),c.P,c.d)),t.rb(10,49152,null,0,o.l,[t.h,t.k,t.y],null,null),(l()(),t.sb(11,0,null,0,1,"ion-icon",[["class","ion-text-center"],["name","ios-add"]],null,null,null,c.ab,c.o)),t.rb(12,49152,null,0,o.D,[t.h,t.k,t.y],{name:[0,"name"]},null),(l()(),t.Mb(-1,0,[" Fund Wallet "]))],(function(l,n){l(n,12,0,"ios-add")}),null)}function y(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,3,"div",[["class","centerDiv2"]],null,null,null,null,null)),(l()(),t.sb(1,0,null,null,2,"angular4-paystack",[],null,[[null,"close"],[null,"callback"]],(function(l,n,u){var t=!0,e=l.component;return"close"===n&&(t=!1!==e.paymentCancel()&&t),"callback"===n&&(t=!1!==e.paymentDone(u)&&t),t}),h,p)),t.rb(2,49152,null,0,b.a,[b.d],{key:[0,"key"],email:[1,"email"],amount:[2,"amount"],ref:[3,"ref"],currency:[4,"currency"],channels:[5,"channels"]},{callback:"callback"}),(l()(),t.Mb(3,0,["Pay GHC "," with Mobile Money/Card"]))],(function(l,n){var u=n.component;l(n,2,0,"pk_live_3cbc59938d89297220920c120790e6bd28d07d91","nana@ekodot.com",u.funds,u.random_id,"GHS",u.channels)}),(function(l,n){l(n,3,0,n.component.funds)}))}function k(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,9,"ion-header",[["no-border",""]],null,null,null,c.Z,c.n)),t.rb(1,49152,null,0,o.C,[t.h,t.k,t.y],null,null),(l()(),t.sb(2,0,null,0,7,"ion-toolbar",[["style","margin-top: 20px"]],null,null,null,c.wb,c.K)),t.rb(3,49152,null,0,o.Db,[t.h,t.k,t.y],null,null),(l()(),t.sb(4,0,null,0,5,"ion-button",[["color","primary"],["fill","clear"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.goBack()&&t),t}),c.P,c.d)),t.rb(5,49152,null,0,o.l,[t.h,t.k,t.y],{color:[0,"color"],fill:[1,"fill"]},null),(l()(),t.sb(6,0,null,0,1,"ion-icon",[["name","arrow-back"],["style","font-size: 1.5em"]],null,null,null,c.ab,c.o)),t.rb(7,49152,null,0,o.D,[t.h,t.k,t.y],{name:[0,"name"]},null),(l()(),t.sb(8,0,null,0,1,"span",[["style","margin-left: 30px; font-size: 1.4em"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Subscription Wallet"])),(l()(),t.sb(10,0,null,null,9,"ion-content",[],null,null,null,c.S,c.g)),t.rb(11,49152,null,0,o.v,[t.h,t.k,t.y],null,null),(l()(),t.hb(16777216,null,0,1,null,m)),t.rb(13,16384,null,0,d.k,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,0,1,null,g)),t.rb(15,16384,null,0,d.k,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,0,1,null,v)),t.rb(17,16384,null,0,d.k,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,0,1,null,y)),t.rb(19,16384,null,0,d.k,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.sb(20,0,null,null,2,"ion-footer",[],null,null,null,c.X,c.l)),t.rb(21,49152,null,0,o.A,[t.h,t.k,t.y],null,null),(l()(),t.sb(22,0,null,0,0,"img",[["src","/assets/img/payment.png"]],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,5,0,"primary","clear"),l(n,7,0,"arrow-back"),l(n,13,0,u.ph.funds),l(n,15,0,u.ph.funds),l(n,17,0,!u.ph.funds),l(n,19,0,u.funds)}),null)}function C(l){return t.Ob(0,[(l()(),t.sb(0,0,null,null,1,"app-wallet",[],null,null,null,k,f)),t.rb(1,114688,null,0,s,[o.Kb,o.b,i.a],null,null)],(function(l,n){l(n,1,0)}),null)}var w=t.ob("app-wallet",s,C,{},{},[]),x=u("s7LF"),M=u("iInd");u.d(n,"WalletPageModuleNgFactory",(function(){return D}));var D=t.pb(a,[],(function(l){return t.Bb([t.Cb(512,t.j,t.ab,[[8,[r.a,w]],[3,t.j],t.w]),t.Cb(4608,d.m,d.l,[t.t,[2,d.y]]),t.Cb(4608,x.w,x.w,[]),t.Cb(4608,o.c,o.c,[t.y,t.g]),t.Cb(4608,o.Jb,o.Jb,[o.c,t.j,t.q]),t.Cb(4608,o.Ob,o.Ob,[o.c,t.j,t.q]),t.Cb(1073742336,d.b,d.b,[]),t.Cb(1073742336,x.v,x.v,[]),t.Cb(1073742336,x.j,x.j,[]),t.Cb(1073742336,o.Fb,o.Fb,[]),t.Cb(1073742336,b.c,b.c,[]),t.Cb(1073742336,M.o,M.o,[[2,M.t],[2,M.m]]),t.Cb(1073742336,a,a,[]),t.Cb(1024,M.k,(function(){return[[{path:"",component:s}]]}),[])])}))}}]);