(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"748j":function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),o=t("mrSG"),r=t("ZZ/e"),i=t("kyOO"),u=t("86hP"),c=t("Aso2"),a=t("fTLw"),s=t("6nr9"),p=function(){function n(n,l,t,e,o,r,i,u){this.navCtrl=n,this.lp=l,this.settings=t,this.pop=e,this.load=o,this.profile=r,this.alert=i,this.eventProvider=u,this.math=Math,this.float=parseFloat;var c=new Date;this.today=c.getDay()}return n.prototype.ionViewDidEnter=function(){var n=this,l=[];this.pop.showLoader("").then((function(){n.pop.hideLoader()})),this.eventProvider.getEventList().on("value",(function(l){n.eventList=[],l.forEach((function(l){return n.eventList.push({id:l.key,name:l.val().name,price:l.val().price-n.check(l.val().price,l.val().surcharge||[]),date:l.val().date,location:l.val().location,destination:l.val().destination,tip:l.val().tip-n.checkMe(l.val().tip,l.val().surcharge||[]),upvote:l.val().upvote||0,downvote:l.val().downvote||0,toll:l.val().tolls,surcharge:l.val().surcharge,realPrice:l.val().realPrice,osc:l.val().osc}),n.eventList.sort(),n.eventList.reverse(),console.log(n.eventList),!1}))})),this.profile.getUserProfile().on("value",(function(l){n.earnings=Math.floor(l.val().earnings)}));for(var t=0;t<this.eventList.length;t++){l.push(parseFloat(this.eventList[t].price));var e=l.reduce((function(n,l){return n+l}));this.mr=e.toFixed(2)}console.log(this.mr)},n.prototype.goBack=function(){return o.b(this,void 0,void 0,(function(){return o.e(this,(function(n){return this.navCtrl.navigateRoot("home"),[2]}))}))},n.prototype.checkMe=function(n,l){var t=this,e=[],o=[];return console.log(l),l.forEach((function(l){if(t.riderpaid=parseFloat(n).toFixed(2),0==l.owner){if(1==l.bone){var r=l.price/100;console.log(r*t.riderpaid),o.push(r*t.riderpaid);var i=o.reduce((function(n,l){return n+l}));t.percentDriver=i,console.log(Math.floor(l.price)/100*t.riderpaid)}if(0==l.bone){e.push(parseFloat(l.price));var u=e.reduce((function(n,l){return n+l}));t.flatDriver=u,console.log(u)}t.totalDriverSurge=t.flatDriver+t.percentDriver,console.log(t.totalDriverSurge,t.flatDriver,t.percentDriver)}})),this.totalDriverSurge},n.prototype.check=function(n,l){var t=this,e=[],o=[];return console.log(l),l.forEach((function(l){if(t.wef=parseFloat(n).toFixed(2),0==l.owner){if(1==l.bone){var r=l.price/100;console.log(r*t.wef),o.push(r*t.wef);var i=o.reduce((function(n,l){return n+l}));t.percent2Driver=i,console.log(Math.floor(l.price)/100*t.wef)}if(0==l.bone){e.push(parseFloat(l.price));var u=e.reduce((function(n,l){return n+l}));t.flat2Driver=u,console.log(u)}t.myDriverSurge=t.flat2Driver+t.percent2Driver,console.log(t.myDriverSurge,t.flatDriver,t.percentDriver)}})),this.myDriverSurge},n.prototype.presentRouteLoader=function(n){return o.b(this,void 0,void 0,(function(){var l,t,e=this;return o.e(this,(function(o){switch(o.label){case 0:return[4,this.load.create({message:n})];case 1:return[4,(l=o.sent()).present()];case 2:return o.sent(),t=setInterval((function(){null!=e.eventList&&(l.dismiss(),clearInterval(t))}),1e3),[2]}}))}))},n.prototype.goToEventDetail=function(n){this.navCtrl.navigateRoot(["historydetail",{eventId:n}])},n.prototype.OpenCancelled=function(){this.navCtrl.navigateRoot("cancelled")},n.prototype.Delete=function(n){return o.b(this,void 0,void 0,(function(){var l=this;return o.e(this,(function(t){switch(t.label){case 0:return[4,this.alert.create({message:this.lp.translate()[0].c5,buttons:[{text:this.lp.translate()[0].c6,role:"cancel",handler:function(){}},{text:this.lp.translate()[0].c7,handler:function(){l.eventProvider.getEventDetail(n).update({hidden:!0}).then((function(n){}))}}],backdropDismiss:!1})];case 1:return t.sent().present(),[2]}}))}))},n.prototype.ngOnInit=function(){},n}(),f=function(){return function(){}}(),v=t("pMnS"),b=t("oBZk"),h=t("Ip0R"),d=e.sb({encapsulation:0,styles:[['ion-content[_ngcontent-%COMP%]{border-bottom:1px solid rgba(212,212,212,.93)!important}ion-content[_ngcontent-%COMP%]   .drive[_ngcontent-%COMP%]{color:#f7f7f7;font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif}ion-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#0f0}ion-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#fbb91d}ion-content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{color:#f6fcff}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:#f5f5f5}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-top:24px;box-shadow:none}.hists[_ngcontent-%COMP%]{border:1px solid;margin:8px;border-radius:20px;--background:rgb(0, 0, 0);color:light}.price[_ngcontent-%COMP%]{color:#006e00}ion-footer[_ngcontent-%COMP%]{border-top:1.4px solid rgba(212,212,212,.93)}']],data:{}});function g(n){return e.Qb(0,[(n()(),e.ub(0,0,null,null,6,"div",[],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goToEventDetail(n.parent.context.$implicit.id)&&e),e}),null,null)),(n()(),e.ub(1,0,null,null,2,"h2",[["class","location"]],null,null,null,null,null)),(n()(),e.ub(2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),e.Ob(3,null,[""," ",""])),(n()(),e.ub(4,0,null,null,2,"h2",[["class","date"]],null,null,null,null,null)),(n()(),e.ub(5,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),e.Ob(6,null,["",""]))],null,(function(n,l){n(l,3,0,l.component.settings.appcurrency,null==l.parent.context.$implicit?null:l.parent.context.$implicit.realPrice),n(l,6,0,null==l.parent.context.$implicit?null:l.parent.context.$implicit.date)}))}function m(n){return e.Qb(0,[(n()(),e.ub(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.ub(1,0,null,null,3,"ion-item",[["class","hists"],["lines","none"]],null,null,null,b.gb,b.s)),e.tb(2,49152,null,0,r.I,[e.h,e.k,e.A],{lines:[0,"lines"]},null),(n()(),e.jb(16777216,null,0,1,null,g)),e.tb(4,16384,null,0,h.k,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,"none"),n(l,4,0,null!=l.context.$implicit.name)}),null)}function y(n){return e.Qb(0,[(n()(),e.ub(0,0,null,null,9,"ion-header",[["no-border",""]],null,null,null,b.Z,b.n)),e.tb(1,49152,null,0,r.C,[e.h,e.k,e.A],null,null),(n()(),e.ub(2,0,null,0,7,"ion-toolbar",[],null,null,null,b.wb,b.K)),e.tb(3,49152,null,0,r.Db,[e.h,e.k,e.A],null,null),(n()(),e.ub(4,0,null,0,5,"ion-button",[["color","primary"],["fill","clear"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goBack()&&e),e}),b.P,b.d)),e.tb(5,49152,null,0,r.l,[e.h,e.k,e.A],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),e.ub(6,0,null,0,1,"ion-icon",[["name","arrow-back"],["style","font-size: 1.5em"]],null,null,null,b.ab,b.o)),e.tb(7,49152,null,0,r.D,[e.h,e.k,e.A],{name:[0,"name"]},null),(n()(),e.ub(8,0,null,0,1,"span",[["style","margin-left: 30px; font-size: 1.4em"]],null,null,null,null,null)),(n()(),e.Ob(9,null,["",""])),(n()(),e.ub(10,0,null,null,6,"ion-content",[["class","yes-scroll"]],null,null,null,b.S,b.g)),e.tb(11,49152,null,0,r.v,[e.h,e.k,e.A],null,null),(n()(),e.ub(12,0,null,0,4,"div",[["class","followed-items"]],null,null,null,null,null)),(n()(),e.ub(13,0,null,null,3,"ion-list",[["class","padding"]],null,null,null,b.ib,b.w)),e.tb(14,49152,null,0,r.P,[e.h,e.k,e.A],null,null),(n()(),e.jb(16777216,null,0,1,null,m)),e.tb(16,278528,null,0,h.j,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),(n()(),e.ub(17,0,null,null,1,"ion-footer",[],null,null,null,b.X,b.l)),e.tb(18,49152,null,0,r.A,[e.h,e.k,e.A],null,null)],(function(n,l){var t=l.component;n(l,5,0,"primary","clear"),n(l,7,0,"arrow-back"),n(l,16,0,t.eventList)}),(function(n,l){n(l,9,0,l.component.lp.translate()[0].b10)}))}function k(n){return e.Qb(0,[(n()(),e.ub(0,0,null,null,1,"app-history",[],null,null,null,y,d)),e.tb(1,114688,null,0,p,[r.Kb,i.a,s.a,u.a,r.Hb,c.a,r.b,a.a],null,null)],(function(n,l){n(l,1,0)}),null)}var w=e.qb("app-history",p,k,{},{},[]),D=t("gIcY"),P=t("ZYCi");t.d(l,"HistoryPageModuleNgFactory",(function(){return M}));var M=e.rb(f,[],(function(n){return e.Db([e.Eb(512,e.j,e.cb,[[8,[v.a,w]],[3,e.j],e.y]),e.Eb(4608,h.m,h.l,[e.v,[2,h.y]]),e.Eb(4608,D.w,D.w,[]),e.Eb(4608,r.c,r.c,[e.A,e.g]),e.Eb(4608,r.Jb,r.Jb,[r.c,e.j,e.r]),e.Eb(4608,r.Ob,r.Ob,[r.c,e.j,e.r]),e.Eb(1073742336,h.b,h.b,[]),e.Eb(1073742336,D.v,D.v,[]),e.Eb(1073742336,D.j,D.j,[]),e.Eb(1073742336,r.Fb,r.Fb,[]),e.Eb(1073742336,P.o,P.o,[[2,P.t],[2,P.m]]),e.Eb(1073742336,f,f,[]),e.Eb(1024,P.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);