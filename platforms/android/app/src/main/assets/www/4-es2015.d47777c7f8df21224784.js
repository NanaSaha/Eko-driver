(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"748j":function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),o=t("mrSG"),i=t("ZZ/e"),r=t("kyOO"),s=t("86hP"),u=t("Aso2"),a=t("fTLw"),c=t("6nr9");class h{constructor(l,n,t,e,o,i,r,s){this.navCtrl=l,this.lp=n,this.settings=t,this.pop=e,this.load=o,this.profile=i,this.alert=r,this.eventProvider=s,this.math=Math,this.float=parseFloat;let u=new Date;this.today=u.getDay()}ionViewDidEnter(){let l=[];this.pop.showLoader("").then(()=>{this.pop.hideLoader()}),this.eventProvider.getEventList().on("value",l=>{this.eventList=[],l.forEach(l=>(this.eventList.push({id:l.key,name:l.val().name,price:l.val().price-this.check(l.val().price,l.val().surcharge||[]),date:l.val().date,location:l.val().location,destination:l.val().destination,tip:l.val().tip-this.checkMe(l.val().tip,l.val().surcharge||[]),upvote:l.val().upvote||0,downvote:l.val().downvote||0,toll:l.val().tolls,surcharge:l.val().surcharge,realPrice:l.val().realPrice,osc:l.val().osc}),this.eventList.sort(),this.eventList.reverse(),console.log(this.eventList),!1))}),this.profile.getUserProfile().on("value",l=>{this.earnings=Math.floor(l.val().earnings)});for(let n=0;n<this.eventList.length;n++){l.push(parseFloat(this.eventList[n].price));const t=l.reduce((l,n)=>l+n);this.mr=t.toFixed(2)}console.log(this.mr)}goBack(){return o.b(this,void 0,void 0,(function*(){this.navCtrl.navigateRoot("home")}))}checkMe(l,n){let t=[],e=[];return console.log(n),n.forEach(n=>{if(this.riderpaid=parseFloat(l).toFixed(2),0==n.owner){if(1==n.bone){let l=n.price/100;console.log(l*this.riderpaid),e.push(l*this.riderpaid);const t=e.reduce((l,n)=>l+n);this.percentDriver=t,console.log(Math.floor(n.price)/100*this.riderpaid)}if(0==n.bone){t.push(parseFloat(n.price));const l=t.reduce((l,n)=>l+n);this.flatDriver=l,console.log(l)}this.totalDriverSurge=this.flatDriver+this.percentDriver,console.log(this.totalDriverSurge,this.flatDriver,this.percentDriver)}}),this.totalDriverSurge}check(l,n){let t=[],e=[];return console.log(n),n.forEach(n=>{if(this.wef=parseFloat(l).toFixed(2),0==n.owner){if(1==n.bone){let l=n.price/100;console.log(l*this.wef),e.push(l*this.wef);const t=e.reduce((l,n)=>l+n);this.percent2Driver=t,console.log(Math.floor(n.price)/100*this.wef)}if(0==n.bone){t.push(parseFloat(n.price));const l=t.reduce((l,n)=>l+n);this.flat2Driver=l,console.log(l)}this.myDriverSurge=this.flat2Driver+this.percent2Driver,console.log(this.myDriverSurge,this.flatDriver,this.percentDriver)}}),this.myDriverSurge}presentRouteLoader(l){return o.b(this,void 0,void 0,(function*(){const n=yield this.load.create({message:l});yield n.present();let t=setInterval(()=>{null!=this.eventList&&(n.dismiss(),clearInterval(t))},1e3)}))}goToEventDetail(l){this.navCtrl.navigateRoot(["historydetail",{eventId:l}])}OpenCancelled(){this.navCtrl.navigateRoot("cancelled")}Delete(l){return o.b(this,void 0,void 0,(function*(){(yield this.alert.create({message:this.lp.translate()[0].c5,buttons:[{text:this.lp.translate()[0].c6,role:"cancel",handler:()=>{}},{text:this.lp.translate()[0].c7,handler:()=>{this.eventProvider.getEventDetail(l).update({hidden:!0}).then(l=>{})}}],backdropDismiss:!1})).present()}))}ngOnInit(){}}class p{}var b=t("pMnS"),v=t("oBZk"),d=t("SVse"),g=e.qb({encapsulation:0,styles:[['ion-content[_ngcontent-%COMP%]{border-bottom:1px solid rgba(212,212,212,.93)!important}ion-content[_ngcontent-%COMP%]   .drive[_ngcontent-%COMP%]{color:#f7f7f7;font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif}ion-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#0f0}ion-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#fbb91d}ion-content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{color:#f6fcff}ion-content[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:#f5f5f5}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-top:24px;box-shadow:none}.hists[_ngcontent-%COMP%]{border:1px solid;margin:8px;border-radius:20px;--background:rgb(0, 0, 0);color:light}.price[_ngcontent-%COMP%]{color:#006e00}ion-footer[_ngcontent-%COMP%]{border-top:1.4px solid rgba(212,212,212,.93)}']],data:{}});function f(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.goToEventDetail(l.parent.context.$implicit.id)&&e),e}),null,null)),(l()(),e.sb(1,0,null,null,2,"h2",[["class","location"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(3,null,[""," ",""])),(l()(),e.sb(4,0,null,null,2,"h2",[["class","date"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(6,null,["",""]))],null,(function(l,n){l(n,3,0,n.component.settings.appcurrency,null==n.parent.context.$implicit?null:n.parent.context.$implicit.realPrice),l(n,6,0,null==n.parent.context.$implicit?null:n.parent.context.$implicit.date)}))}function m(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,3,"ion-item",[["class","hists"],["lines","none"]],null,null,null,v.gb,v.s)),e.rb(2,49152,null,0,i.I,[e.h,e.k,e.y],{lines:[0,"lines"]},null),(l()(),e.hb(16777216,null,0,1,null,f)),e.rb(4,16384,null,0,d.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,"none"),l(n,4,0,null!=n.context.$implicit.name)}),null)}function C(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,9,"ion-header",[["no-border",""]],null,null,null,v.Z,v.n)),e.rb(1,49152,null,0,i.C,[e.h,e.k,e.y],null,null),(l()(),e.sb(2,0,null,0,7,"ion-toolbar",[],null,null,null,v.wb,v.K)),e.rb(3,49152,null,0,i.Db,[e.h,e.k,e.y],null,null),(l()(),e.sb(4,0,null,0,5,"ion-button",[["color","primary"],["fill","clear"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.goBack()&&e),e}),v.P,v.d)),e.rb(5,49152,null,0,i.l,[e.h,e.k,e.y],{color:[0,"color"],fill:[1,"fill"]},null),(l()(),e.sb(6,0,null,0,1,"ion-icon",[["name","arrow-back"],["style","font-size: 1.5em"]],null,null,null,v.ab,v.o)),e.rb(7,49152,null,0,i.D,[e.h,e.k,e.y],{name:[0,"name"]},null),(l()(),e.sb(8,0,null,0,1,"span",[["style","margin-left: 30px; font-size: 1.4em"]],null,null,null,null,null)),(l()(),e.Mb(9,null,["",""])),(l()(),e.sb(10,0,null,null,6,"ion-content",[["class","yes-scroll"]],null,null,null,v.S,v.g)),e.rb(11,49152,null,0,i.v,[e.h,e.k,e.y],null,null),(l()(),e.sb(12,0,null,0,4,"div",[["class","followed-items"]],null,null,null,null,null)),(l()(),e.sb(13,0,null,null,3,"ion-list",[["class","padding"]],null,null,null,v.ib,v.w)),e.rb(14,49152,null,0,i.P,[e.h,e.k,e.y],null,null),(l()(),e.hb(16777216,null,0,1,null,m)),e.rb(16,278528,null,0,d.j,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(17,0,null,null,1,"ion-footer",[],null,null,null,v.X,v.l)),e.rb(18,49152,null,0,i.A,[e.h,e.k,e.y],null,null)],(function(l,n){var t=n.component;l(n,5,0,"primary","clear"),l(n,7,0,"arrow-back"),l(n,16,0,t.eventList)}),(function(l,n){l(n,9,0,n.component.lp.translate()[0].b10)}))}function y(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"app-history",[],null,null,null,C,g)),e.rb(1,114688,null,0,h,[i.Kb,r.a,c.a,s.a,i.Hb,u.a,i.b,a.a],null,null)],(function(l,n){l(n,1,0)}),null)}var k=e.ob("app-history",h,y,{},{},[]),w=t("s7LF"),D=t("iInd");t.d(n,"HistoryPageModuleNgFactory",(function(){return M}));var M=e.pb(p,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[b.a,k]],[3,e.j],e.w]),e.Cb(4608,d.m,d.l,[e.t,[2,d.y]]),e.Cb(4608,w.w,w.w,[]),e.Cb(4608,i.c,i.c,[e.y,e.g]),e.Cb(4608,i.Jb,i.Jb,[i.c,e.j,e.q]),e.Cb(4608,i.Ob,i.Ob,[i.c,e.j,e.q]),e.Cb(1073742336,d.b,d.b,[]),e.Cb(1073742336,w.v,w.v,[]),e.Cb(1073742336,w.j,w.j,[]),e.Cb(1073742336,i.Fb,i.Fb,[]),e.Cb(1073742336,D.o,D.o,[[2,D.t],[2,D.m]]),e.Cb(1073742336,p,p,[]),e.Cb(1024,D.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);